{% extends 'AppBundle:Layout:base.html.twig' %}

{% block title %}{{ "page.title.list"|trans({},"NoticeBundle") }}{% endblock %} 

{% block stylesheets %}
    <!-- DataTables -->
    <link href="{{ asset('assets/plugins/datatables/jquery.dataTables.min.css') }}" rel="stylesheet" type="text/css"/>
    <link href="{{ asset('assets/plugins/datatables/buttons.bootstrap.min.css') }}" rel="stylesheet" type="text/css"/>
    <link href="{{ asset('assets/plugins/datatables/responsive.bootstrap.min.css') }}" rel="stylesheet" type="text/css"/>
    <link href="{{ asset('assets/plugins/datatables/dataTables.colVis.css') }}" rel="stylesheet" type="text/css"/>
    <link href="{{ asset('assets/plugins/datatables/dataTables.bootstrap.min.css') }}" rel="stylesheet" type="text/css"/>
{% endblock %}

{% block content %}
    <!-- Page-Title -->
    <div class="row">
        <div class="col-sm-12">
            <h4 class="page-title">{{ "menus.Notice"|trans({},"NoticeBundle") }}</h4>
            <ol class="breadcrumb">
                <li>
                    <a href="{{ path("app.dashboard_page") }}">{{ "menus.Dashboard"|trans({},"AppBundle") }}</a>
                </li>
                <li>
                    <a href="{{ path("notice.list_page") }}">{{ "menus.Notice"|trans({},"NoticeBundle") }}</a>
                </li>
                <li>
                    <a href="{{ path("notice.list_page") }}">{{ "menus.List"|trans({},"AppBundle") }}</a>
                </li>
            </ol>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <div class="card-box">
                <div id="noticeList">
                    <table id="datatable-responsive"
                        class="table table-striped dt-responsive nowrap" cellspacing="0"
                        width="100%">
                        <thead>
                            <tr>
                                <th>{{ "fields.id"|trans({}, "NoticeBundle") }}</th>
                                <th>{{ "fields.title"|trans({}, "NoticeBundle") }}</th>
                                <th>{{ "fields.description"|trans({}, "NoticeBundle") }}</th>
                                <th>{{ "fields.type"|trans({}, "NoticeBundle") }}</th>
                                <th>{{ "fields.startAt"|trans({}, "NoticeBundle") }}</th>
                                <th>{{ "fields.endAt"|trans({}, "NoticeBundle") }}</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                        <tfoot></tfoot>
                    </table>
                </div>
            </div>
        </div>
    </div>
    
{% endblock %}

{% block javascripts %}
    <script src="{{ asset('assets/plugins/datatables/jquery.dataTables.min.js') }}"></script>
    <script src="{{ asset('assets/plugins/datatables/dataTables.bootstrap.js') }}"></script>

    <script src="{{ asset('assets/plugins/datatables/dataTables.buttons.min.js') }}"></script>
    <script src="{{ asset('assets/plugins/datatables/buttons.bootstrap.min.js') }}"></script>
    <script src="{{ asset('assets/plugins/datatables/vfs_fonts.js') }}"></script>
    <script src="{{ asset('assets/plugins/datatables/buttons.html5.min.js') }}"></script>
    <script src="{{ asset('assets/plugins/datatables/dataTables.responsive.min.js') }}"></script>
    <script src="{{ asset('assets/plugins/datatables/responsive.bootstrap.min.js') }}"></script>
    <script src="{{ asset('assets/plugins/datatables/dataTables.colVis.js') }}"></script>
    
    <script src="{{ asset('bundles/notice/js/list.js') }}" type="text/javascript" ></script>
    <script type="text/javascript" >
        $(function(){
            var columns = [];
            var types = {{ types|json_encode()|raw }};
            columns[3] = {
                'data': 'notice.type',
                'defaultContent': '',
                'render': function(data) {
                    return types[data];
                }
            };
            columns[4] = {
                'data': 'notice.startAt',
                'defaultContent': '',
                'render': function(data) {
                    return moment(data.date).format('MMM D, YYYY h:mm A');
                }
            };
            columns[5] = {
                'data': 'notice.endAt',
                'defaultContent': '',
                'render': function(data) {
                    return moment(data.date).format('MMM D, YYYY h:mm A');
                }
            };
            $('#noticeList').list({
                'url': {
                    'list': '{{ path("notice.list_search") }}'
                },
                'columns': columns
            });
        });
    </script>
{% endblock %}