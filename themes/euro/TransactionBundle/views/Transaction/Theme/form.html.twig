{% block _Transaction_customerFee_row %}
    <div class="col-sm-6">
        <div class="form-group">
            {{ form_label(form) }}
            {{ form_widget(form) }}
            {{ form_errors(form) }}
        </div>
    </div>
{% endblock %}

{% block _Transaction_companyFee_row %}
    <div class="col-sm-6">
        <div class="form-group">
            {{ form_label(form) }}
            {{ form_widget(form) }}
            {{ form_errors(form) }}
        </div>
    </div>
{% endblock %}

{% block subTransaction_row %}
    {{ form_widget(form) }}
{% endblock %}

{% block subTransaction_widget %}
    <div id="{{ form.vars.id }}" class="row customer-product">
        {{ form_widget(form.type, {"attr": {"class":"subtransaction-type"}}) }}
        <div class="col-md-7 col-sm-7 col-xs-12">
            <div class="form-group">
                <div class="input-group">
                    <span class="input-group-addon">{{ form_label(form.customerProduct) }}</span>
                    {{ form_widget(form.customerProduct, {"attr": {"class":"subtransaction-product"}}) }}
                    {% if form.immutableCustomerProductData is defined %}
                        {{ form_widget(form.immutableCustomerProductData, {'attr': {'class':'immutableCustomerProductData hidden'}}) }}
                    {% endif %}
                </div>
                <div class="help-block">
                    <ul class="list-unstyled"></ul>
                </div>
            </div>
        </div>
        <div class="col-md-5 col-sm-5 col-xs-12 amount-col">
            <div class="form-group">
                <div class="input-group">
                    <span class="input-group-addon"><i class="fa fa-money"></i></span>
                    {{ form_widget(form.amount, {"attr": {"class":"subtransaction-amount"}}) }}
                    {% if not view %}
                    <span class="input-group-btn remove-product-button">
                        <button type="button" class="btn btn-danger waves-effect waves-light btn-remove-product"><i class="fa fa-close"></i></button>
                    </span>
                    {% endif %}
                </div>
                <div class="help-block">
                    <ul class="list-unstyled"></ul>
                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block _Transaction_subTransactions_row %}
    <div class="card-box" id="{{ form.vars.id }}">
        <h4 class="header-title m-b-30 m-t-0">
            Products
            {%- if form.vars.addSubtransaction -%}
            &nbsp;|<button type="button" class="btn btn-success btn-xs btn-add-product btn-icon"><i class="fa fa-plus" title="Add Product"></i></button>
            {%- endif %}
        </h4>
        <div class="product-list">
        </div>
    </div>
{% endblock %}

{% block _Transaction_subTransactions_assetjs %}
    {{ asset_add('js',asset('assets/plugins/bootstrap-select/js/bootstrap-select.min.js'), 'form.asset') }}
{% endblock %}

{% block _Transaction_subTransactions_assetcss %}
    {{ asset_add('css',asset('assets/plugins/bootstrap-select/css/bootstrap-select.min.css'), 'form.asset') }}
{% endblock %}

{% block _Transaction_subTransactions_entry_amount_errors %}
    {{ block("get_form_errors") }}
{% endblock %}

{% block _Transaction_subTransactions_entry_customerProduct_errors %}
    {{ block("get_form_errors") }}
{% endblock %}

{% block _Transaction_subTransactions_entry_type_errors %}
    {{ block("get_form_errors") }}
{% endblock %}

{%- block subTransaction_errors -%}
    {{- block("get_form_errors") -}}
{%- endblock %}

{%- block get_form_errors -%}
    {% set errs = {} %}
    {%- for key,err in errors -%}
        {% set errs = errs|merge({(key): err.message}) %}
    {%- endfor -%}
    {%- for child in form.children  -%}
        {%- if child.vars.errors|length > 0 -%}
            {% set errs = errs|merge({(child.vars.name): (form_errors(child)|json_decode)}) %}
        {% endif %}
    {%- endfor -%}
    {{ errs|json_encode()|raw }}
{%- endblock get_form_errors %}